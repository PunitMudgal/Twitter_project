{"version":3,"file":"static/js/613.f556d0af.chunk.js","mappings":"6MA2FA,QAlFA,WACE,MAAOA,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IAChCC,EAAOC,IAAYF,EAAAA,EAAAA,UAAS,IAE7BG,GAAWC,EAAAA,EAAAA,MA6BjB,OAJAC,EAAAA,EAAAA,YAAU,KAvBYC,WACpBP,GAAW,GACX,IACE,MAAMQ,QAAaC,EAAAA,EAAAA,MACnBN,EAASK,EACX,CAAE,MAAOE,GACPC,EAAAA,GAAMD,MAAM,uBACd,CAAC,QACCV,GAAW,EACb,GAeAY,EAAe,GACd,KAGDC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sGAAqGC,UAClHC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uIAAsIC,SAAA,EACnJF,EAAAA,EAAAA,KAAA,KACEI,QAASA,IAAMb,GAAU,GACzBU,UAAU,6DAA4DC,SACvE,UAGAhB,GACCc,EAAAA,EAAAA,KAACK,EAAAA,EAAO,IAEH,OAALhB,QAAK,IAALA,OAAK,EAALA,EAAOiB,KAAKC,IACVJ,EAAAA,EAAAA,MAAA,OAEEF,UAAU,wEAAuEC,SAAA,EAEjFF,EAAAA,EAAAA,KAACQ,EAAAA,EAAM,CACLC,aAAcF,EAAKG,mBACnBC,OAAQJ,EAAKK,OAEfT,EAAAA,EAAAA,MAAA,OACEC,QAASA,IAAMb,EAAS,SAASgB,EAAKK,OACtCX,UAAU,+BAA8BC,SAAA,EAExCC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,qCAAoCC,SAAA,EAC9CW,EAAAA,EAAAA,IAAiBN,EAAKO,MACtBP,EAAKQ,UACJf,EAAAA,EAAAA,KAAA,OAAKgB,IAAKC,EAAMhB,UAAU,UAAUiB,IAAI,mBAG5Cf,EAAAA,EAAAA,MAAA,KAAGF,UAAU,qBAAoBC,SAAA,CAAC,KAC9BW,EAAAA,EAAAA,IAAiBN,EAAKY,iBAG5BnB,EAAAA,EAAAA,KAAA,UACEI,QAASA,IAnDEV,WACvB,MAAM0B,GAAgBC,EAAAA,EAAAA,IAAWV,SAC3Bb,EAAAA,GAAMwB,QAAQF,EAAe,CACjClC,QAAS,mBACTqC,QAAS,4BACT1B,MAAO,wBAET,MAAM2B,EAAWnC,EAAMoC,QAAQlB,GAASA,EAAKK,MAAQD,IACrDrB,EAASkC,EAAS,EA2CSE,CAAiBnB,EAAKK,KACrCX,UAAU,mFAAkFC,SAC7F,aAxBIK,EAAKK,WAiCxB,C","sources":["pages/AdminPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { deleteUser, getAllUsers } from \"../fetch/helper\";\r\nimport Loading from \"../components/Loading\";\r\nimport toast from \"react-hot-toast\";\r\nimport tick from \"../assets/tick.png\";\r\nimport Avatar from \"../components/Avatar\";\r\nimport { truncateUsername } from \"../store/authSlice\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction AdminPage() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [users, setUsers] = useState([]);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const fetchAllUsers = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await getAllUsers();\r\n      setUsers(data);\r\n    } catch (error) {\r\n      toast.error(\"Error fetching users\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteUser = async (userId) => {\r\n    const deletePromise = deleteUser(userId);\r\n    await toast.promise(deletePromise, {\r\n      loading: \"Deleting User...\",\r\n      success: \"User Deleted Successfully\",\r\n      error: \"Error Deleting User\",\r\n    });\r\n    const newUsers = users.filter((user) => user._id !== userId);\r\n    setUsers(newUsers);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAllUsers();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"h-full w-full bg-opacity-60 bg-gray-800 absolute top-0 left-0 z-20 flex justify-center items-center\">\r\n      <div className=\"h-[85%] w-[75%] p-2 bg-opacity-40 bg-black border-2 border-gray-700 rounded-2xl backdrop-blur-sm m-auto shadow-md overflow-auto z-30\">\r\n        <p\r\n          onClick={() => navigate(-1)}\r\n          className=\"hover:underline cursor-pointer float-right font-extralight\"\r\n        >\r\n          Close\r\n        </p>\r\n        {loading ? (\r\n          <Loading />\r\n        ) : (\r\n          users?.map((user) => (\r\n            <div\r\n              key={user._id} // Add a unique key for each user\r\n              className=\"flex gap-2 items-center p-2 text-sm font-semibold rounded-3xl w-auto \"\r\n            >\r\n              <Avatar\r\n                profilePhoto={user.profilePicturePath}\r\n                userId={user._id}\r\n              />\r\n              <div\r\n                onClick={() => navigate(`/home/${user._id}`)}\r\n                className=\"flex flex-col cursor-pointer\"\r\n              >\r\n                <p className=\"flex gap-1 items-center capitalize\">\r\n                  {truncateUsername(user.name)}\r\n                  {user.isAdmin && (\r\n                    <img src={tick} className=\"h-4 w-4\" alt=\"purpletick\" />\r\n                  )}\r\n                </p>\r\n                <p className=\"text-gray2 text-xs\">\r\n                  @{truncateUsername(user.username)}\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={() => handleDeleteUser(user._id)}\r\n                className=\"border border-red-700 bg-red-300 bg-opacity-20 rounded-md text-red-700 px-4 py-2\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminPage;\r\n"],"names":["loading","setLoading","useState","users","setUsers","navigate","useNavigate","useEffect","async","data","getAllUsers","error","toast","fetchAllUsers","_jsx","className","children","_jsxs","onClick","Loading","map","user","Avatar","profilePhoto","profilePicturePath","userId","_id","truncateUsername","name","isAdmin","src","tick","alt","username","deletePromise","deleteUser","promise","success","newUsers","filter","handleDeleteUser"],"sourceRoot":""}