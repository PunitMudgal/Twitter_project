{"version":3,"file":"static/js/242.48f40122.chunk.js","mappings":"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","sources":["fetch/fetchHook.js","components/homePageComp/RightComp.jsx","pages/Home.jsx"],"sourcesContent":["import { useDispatch } from \"react-redux\";\r\nimport { getUserFromToken } from \"./helper.js\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { axiosInstance } from \"./axios.js\";\r\nimport { setFriendProfile } from \"../store/userSlice.js\";\r\n\r\nexport default function useFetchHook(query) {\r\n  const dispatch = useDispatch();\r\n\r\n  const [getData, setData] = useState({\r\n    isLoading: false,\r\n    serverError: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setData((prev) => ({ ...prev, isLoading: true }));\r\n\r\n        const { data, status } = await axiosInstance.get(`/user/${query}`);\r\n\r\n        if (status === 200) {\r\n          setData((prev) => ({\r\n            ...prev,\r\n            isLoading: false,\r\n          }));\r\n          dispatch(setFriendProfile(data));\r\n        }\r\n      } catch (error) {\r\n        setData((prev) => ({\r\n          ...prev,\r\n          isLoading: false,\r\n          serverError: axios.isAxiosError(error)\r\n            ? error.response?.data\r\n            : \"Unexpected Error\",\r\n        }));\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [query, dispatch]);\r\n\r\n  return [getData, setData];\r\n}\r\n","import { motion } from \"framer-motion\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { RiRefreshLine } from \"react-icons/ri\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport tick from \"../../assets/tick.png\";\r\nimport chatIcon from \"../../assets/chat.svg\";\r\nimport Avatar from \"../Avatar\";\r\nimport { getAllFollowing, getFriendSuggestion } from \"../../fetch/helper\";\r\nimport Loading from \"../Loading\";\r\nimport \"../../style/profile.css\";\r\nimport FriendWidget from \"../widget/FriendWidget\";\r\nimport { setCurrentFollowing } from \"../../store/authSlice\";\r\nimport { truncateUsername } from \"../../store/authSlice\";\r\nimport Search from \"../Search\";\r\nimport useFollowUnfollow from \"../../store/useFollowUnfollow\";\r\nimport { CreateConversations } from \"../../store/chatSlice\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction RightComp() {\r\n  const { handleUnfollowUser } = useFollowUnfollow();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const currentUser = useSelector((state) => state.auth?.user);\r\n  const currentFollowing = useSelector((state) => state.auth?.currentFollowing);\r\n\r\n  const [isRotating, setIsRotating] = useState(false);\r\n  const [suggestedFriends, setSuggestedFriends] = useState([]);\r\n  const [suggestionLoading, setSuggestionLoading] = useState(true);\r\n\r\n  const handleRefreshClick = () => {\r\n    setIsRotating(true);\r\n    setTimeout(() => {\r\n      setIsRotating(false);\r\n    }, 2000);\r\n  };\r\n\r\n  // friend suggestion\r\n  const fetchSuggestedFriends = async () => {\r\n    try {\r\n      setSuggestionLoading(true);\r\n      const response = await getFriendSuggestion();\r\n      setSuggestedFriends(response);\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      setSuggestionLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (currentUser?._id) {\r\n      fetchSuggestedFriends();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  /** Fetch Following */\r\n  const fetchFollowing = async () => {\r\n    try {\r\n      const data = await getAllFollowing(currentUser?.following);\r\n      dispatch(setCurrentFollowing(data));\r\n    } catch (error) {\r\n      console.error(\"Error fetching friends:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (currentUser?.following?.length) {\r\n      fetchFollowing(); // Call the async function\r\n    }\r\n  }, [currentUser?.following]);\r\n\r\n  /** for popup animations in friends and suggestion list*/\r\n  const containerVariants = {\r\n    visible: {\r\n      transition: {\r\n        staggerChildren: 0.2, // delay between each item animation\r\n      },\r\n    },\r\n  };\r\n\r\n  const itemVariants = {\r\n    hidden: { opacity: 0, y: 20 },\r\n    visible: { opacity: 1, y: 0 },\r\n  };\r\n\r\n  const handleCreateChat = (friendId) => {\r\n    dispatch(CreateConversations({ currentUserId: currentUser._id, friendId }));\r\n    navigate(\"/messenger\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"col-span-3 flex flex-col gap-4 sticky top-0 overflow-hidden lg:hidden \">\r\n      {/* search bar (top) */}\r\n      <div className=\"sticky top-0 w-screen h-12 flex bg-black items-center \">\r\n        <Search />\r\n      </div>\r\n\r\n      <div className=\"ml-[4%] w-auto flex flex-col gap-4\">\r\n        {/* friends suggestion */}\r\n        <div className=\"flex flex-col justify-start w-auto border border-purple-700  p-3 rounded-md\">\r\n          <div className=\"flex justify-between items-center font-semibold mb-2 text-lg\">\r\n            <p>Friend Suggestions</p>\r\n            <RiRefreshLine\r\n              onClick={() => {\r\n                fetchSuggestedFriends();\r\n                handleRefreshClick();\r\n              }}\r\n              className={`text-3xl p-1 rounded-full hover:bg-gray-800 bg-opacity-50 cursor-pointer ${\r\n                isRotating ? \"rotate-90-cw\" : \"\"\r\n              } `}\r\n            />\r\n          </div>\r\n\r\n          {suggestionLoading ? (\r\n            <Loading />\r\n          ) : (\r\n            <motion.div\r\n              className=\"friends-list-container\"\r\n              variants={containerVariants}\r\n              initial=\"hidden\"\r\n              animate=\"visible\"\r\n            >\r\n              {suggestedFriends?.map((friend) => (\r\n                <motion.div\r\n                  key={friend._id}\r\n                  variants={itemVariants}\r\n                  whileHover={{ scale: 1.05 }} // Optional: scale up on hover\r\n                  transition={{ type: \"spring\", stiffness: 120 }}\r\n                >\r\n                  <FriendWidget {...friend} />\r\n                </motion.div>\r\n              ))}\r\n            </motion.div>\r\n          )}\r\n        </div>\r\n\r\n        {/* friends column */}\r\n        <motion.div\r\n          className=\" border border-purple-700 p-2 rounded-md\"\r\n          variants={containerVariants}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n        >\r\n          <p className=\"font-semibold mb-2 text-lg\">\r\n            Your Followings{\" \"}\r\n            <span className=\"text-sm \">({currentFollowing?.length})</span>{\" \"}\r\n          </p>\r\n\r\n          {currentFollowing?.slice(0, 4).map((friend) => (\r\n            <motion.div\r\n              key={friend?._id}\r\n              className=\"flex gap-2 items-center p-2 text-sm font-semibold rounded-3xl hover:bg-purple-500 hover:bg-opacity-20 \"\r\n              variants={itemVariants}\r\n              whileHover={{ scale: 1.05 }} // Optional: scale up on hover\r\n              transition={{ type: \"spring\", stiffness: 120 }}\r\n            >\r\n              <Avatar\r\n                profilePhoto={friend?.profilePicturePath}\r\n                userId={friend?._id}\r\n              />\r\n              <div className=\"flex flex-col\">\r\n                <p className=\"flex gap-1 items-center capitalize\">\r\n                  {truncateUsername(friend?.name)}\r\n                  {friend?.isAdmin && (\r\n                    <img src={tick} className=\"h-4 w-4\" alt=\"purpletick\" />\r\n                  )}\r\n                </p>\r\n                <p className=\"text-gray2 text-xs\">\r\n                  @{truncateUsername(friend?.username)}\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={() => handleUnfollowUser(friend._id)}\r\n                className=\"p-2 px-3 rounded-3xl ml-auto border bg-transparent text-white hover:text-red-600 hover:border-red-600\"\r\n              >\r\n                Unfollow\r\n              </button>\r\n              <img\r\n                onClick={() => handleCreateChat(friend._id)}\r\n                className=\"h-6 w-auto invert ml-auto cursor-pointer\"\r\n                src={chatIcon}\r\n                alt=\"icon\"\r\n              />\r\n            </motion.div>\r\n          ))}\r\n        </motion.div>\r\n\r\n        {/* exrta column */}\r\n        <div className=\"border border-purple-700 p-2 rounded-md\">\r\n          Buy Premium Now\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RightComp;\r\n","import LeftComp from \"../components/homePageComp/LeftComp\";\r\nimport RightComp from \"../components/homePageComp/RightComp\";\r\nimport { Outlet } from \"react-router-dom\";\r\nimport useFetchHook from \"../fetch/fetchHook\";\r\nimport Loading from \"../components/Loading\";\r\nimport { useRef } from \"react\";\r\nimport { CenterRefProvider } from \"../components/CenterRefContext\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nfunction Home() {\r\n  // const { isLoading, serverError } = useFetchHook();\r\n  const isLoading = useSelector((state) => state.auth.isCheckingAuth);\r\n  const centerRef = useRef(null); // for controlling center scrolling\r\n\r\n  if (isLoading) return <Loading />;\r\n  return (\r\n    <div className=\"grid grid-cols-12 h-screen overflow-hidden lg:flex  \">\r\n      <LeftComp />\r\n      <div\r\n        ref={centerRef}\r\n        className=\"flex flex-col flex-grow col-span-5 border-x border-purple-700 h-full overflow-y-auto lg:col-span-7 \"\r\n      >\r\n        <CenterRefProvider centerRef={centerRef}>\r\n          <Outlet />\r\n        </CenterRefProvider>\r\n      </div>\r\n      <RightComp />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"],"names":["useFetchHook","query","dispatch","useDispatch","getData","setData","useState","isLoading","serverError","useEffect","async","prev","data","status","axiosInstance","get","setFriendProfile","error","_error$response","axios","isAxiosError","response","fetchData","handleUnfollowUser","useFollowUnfollow","navigate","useNavigate","currentUser","useSelector","state","_state$auth","auth","user","currentFollowing","_state$auth2","isRotating","setIsRotating","suggestedFriends","setSuggestedFriends","suggestionLoading","setSuggestionLoading","fetchSuggestedFriends","getFriendSuggestion","console","_id","_currentUser$followin","following","length","getAllFollowing","setCurrentFollowing","fetchFollowing","containerVariants","visible","transition","staggerChildren","itemVariants","hidden","opacity","y","_jsxs","className","children","_jsx","Search","RiRefreshLine","onClick","setTimeout","Loading","motion","div","variants","initial","animate","map","friend","whileHover","scale","type","stiffness","FriendWidget","slice","Avatar","profilePhoto","profilePicturePath","userId","truncateUsername","name","isAdmin","src","tick","alt","username","handleCreateChat","friendId","CreateConversations","currentUserId","chatIcon","isCheckingAuth","centerRef","useRef","LeftComp","ref","CenterRefProvider","Outlet","RightComp"],"sourceRoot":""}